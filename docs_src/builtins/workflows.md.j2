{# Built-in: Workflow Modification #}
# Built-in: Workflow Modification

## Runtime Workflow Evolution

These built-in tools enable workflows to **modify themselves at runtime**. This is the core capability for self-evolution—a workflow can inspect its structure, add new nodes, inject new workflows, and remove obsolete components.

---

## Available Tools

| Tool | Purpose |
|------|---------|
| `soe_get_workflows` | Query registered workflow definitions |
| `soe_inject_workflow` | Add new workflows to the registry |
| `soe_inject_node` | Add or modify nodes in existing workflows |
| `soe_remove_workflow` | Remove workflows from registry |
| `soe_remove_node` | Remove nodes from workflows |

---

## soe_get_workflows

Query the current workflow registry to see all registered workflows and their structure.

```yaml
{{ extract_yaml('tests/test_cases/workflows/guide_builtins.py', 'builtin_soe_get_workflows') }}
```

Returns a dictionary of all registered workflows with their node configurations.

### Use Cases

- **Introspection** — See what workflows are available
- **Validation** — Check if a workflow exists before spawning it
- **Evolution planning** — Understand current structure before modifying

---

## soe_inject_workflow

Add a completely new workflow to the registry at runtime.

```yaml
{{ extract_yaml('tests/test_cases/workflows/guide_builtins.py', 'builtin_soe_inject_workflow') }}
```

### Context Setup

The `workflow_to_inject` context field should contain:

```python
{
    "workflow_name": "new_workflow",
    "workflow_definition": {
        "StartNode": {
            "node_type": "router",
            "event_triggers": ["START"],
            "event_emissions": [{"signal_name": "READY"}]
        }
    }
}
```

### Use Cases

- **Dynamic workflow creation** — LLM designs new workflows
- **Plugin systems** — Load workflows based on configuration
- **A/B testing** — Inject alternative workflow versions

---

## soe_inject_node

Add or modify a single node in an existing workflow.

```yaml
{{ extract_yaml('tests/test_cases/workflows/guide_builtins.py', 'builtin_inject_node') }}
```

### Context Setup

The `node_to_inject` context field should contain:

```python
{
    "workflow_name": "example_workflow",
    "node_name": "NewProcessor",
    "node_configuration": {
        "node_type": "tool",
        "event_triggers": ["PROCESS"],
        "tool_name": "process_data",
        "output_field": "result",
        "event_emissions": [{"signal_name": "PROCESSED"}]
    }
}
```

### Use Cases

- **Incremental evolution** — Add nodes one at a time
- **Patching** — Modify existing node behavior
- **Extension** — Add new capabilities to existing workflows

---

## soe_remove_workflow

Remove a workflow from the registry.

```yaml
{{ extract_yaml('tests/test_cases/workflows/guide_builtins.py', 'builtin_soe_remove_workflow') }}
```

---

## soe_remove_node

Remove a specific node from a workflow.

```yaml
{{ extract_yaml('tests/test_cases/workflows/guide_builtins.py', 'builtin_soe_remove_node') }}
```

---

## Evolution Pattern

Combine these tools for full self-evolution:

```yaml
{{ extract_yaml('tests/test_cases/workflows/guide_builtins.py', 'builtin_evolution_pattern') }}
```

---

## Related

- [Built-in Tools Overview](../guide_11_builtins.md) — All available built-ins
- [Self-Evolving Workflows](../advanced_patterns/self_evolving_workflows.md) — Complete evolution patterns
